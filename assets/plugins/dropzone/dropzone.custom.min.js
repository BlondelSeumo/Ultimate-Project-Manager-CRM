getRndomString=function(e){for(var t="",i="!-().0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=e;a>0;--a)t+=i[Math.round(Math.random()*(i.length-1))];return t},getRandomAlphabet=function(e){for(var t="",i="abcdefghijklmnopqrstuvwxyz",a=e;a>0;--a)t+=i[Math.round(Math.random()*(i.length-1))];return t},attachDropzoneWithForm=function(e,t,i,a){var n=$(e),s=n.find(".post-file-dropzone-scrollbar"),l=n.find(".post-file-previews"),o=n.find(".post-file-upload-row"),r=n.find(".upload-file-button"),d=n.find("button[type=submit]"),p=getRandomAlphabet(15),u=getRandomAlphabet(15),c=getRandomAlphabet(15);l.attr("id",p),o.attr("id",u),r.attr("id",c);var m=document.querySelector("#"+u);m.id="";var f=m.parentNode.innerHTML;return m.parentNode.removeChild(m),a||(a={}),new Dropzone(e,{url:t,thumbnailWidth:80,thumbnailHeight:80,parallelUploads:20,maxFilesize:3e3,previewTemplate:f,dictDefaultMessage:file_upload_instruction,autoQueue:!0,previewsContainer:"#"+p,clickable:"#"+c,maxFiles:a.maxFiles?a.maxFiles:1e3,init:function(){this.on("maxfilesexceeded",function(e){this.removeAllFiles(),this.addFile(e)})},accept:function(e,t){e.name.length>200&&t(filename_too_long),s.removeClass("hide"),initScrollbar(s,{setHeight:90}),s.parent().removeClass("hide"),n.find("textarea").focus(),$.ajax({url:i,data:{file_name:e.name,file_size:e.size},cache:!1,type:"POST",dataType:"json",success:function(i){i.success?($(e.previewTemplate).append("<input type='hidden' name='file_names[]' value='"+e.name+"' />\n                                 <input type='hidden' name='file_sizes[]' value='"+e.size+"' />"),t()):(toastr[error](i.message),$(e.previewTemplate).find("input").remove(),t(i.message))}})},processing:function(){d.prop("disabled",!0)},queuecomplete:function(){d.prop("disabled",!1)},reset:function(e){s.addClass("hide")},fallback:function(){$("body").addClass("dropzone-disabled"),r.click(function(){$(this).html("<i class='fa fa-camera'></i> Add more"),s.removeClass("hide"),initScrollbar(s,{setHeight:90}),s.parent().removeClass("hide"),l.prepend("<div class='clearfix p-sm file-row'><button type='button' class='btn btn-xs btn-danger pull-left mr remove-file'><i class='fa fa-times'></i></button> <input class='pull-left' type='file' name='manualFiles[]' /></div>")}),l.on("click",".remove-file",function(){$(this).parent().remove()})},success:function(e){setTimeout(function(){$(e.previewElement).find(".progress-striped").removeClass("progress-striped").addClass("progress-bar-success")},1e3)}})};